@if (!data()) {
  <p-table
    [value]="[1,2,3,4,5]"
    [columns]="columns()"
  class="flex-1">
    <ng-template #header let-columns>
      <tr>
        @for (col of columns; track col) {
          <th>
            {{ col.header }}
          </th>
        }
      </tr>
    </ng-template>
    <ng-template #body let-columns="columns">
      <tr>
        @for (col of columns; track col) {
          <td>
            <p-skeleton></p-skeleton>
          </td>
        }
      </tr>
    </ng-template>
  </p-table>
} @else {
  <p-table
    [value]="data() ?? []"
    [columns]="columns()"
    [scrollable]="true"
    [size]="'small'"
    (click)="onTableClick()"
    selectionMode="single"
    [(selection)]="selectedDriver"
    (onRowSelect)="displayPopover($event)"
    scrollHeight="flex">
    <ng-template #header let-columns>
      <tr>
        @for (col of columns; track col) {
          <th>
            {{ col.header }}
          </th>
        }
      </tr>
    </ng-template>
    <ng-template #body let-rowData let-columns="columns">
      <tr [pSelectableRow]="rowData" class="!hover:underline hover:!bg-primary  hover:!text-white">
        @for (col of columns; track col) {
          @if (col.field === 'driver') {
            <td>
              {{ rowData[col.field] }}
            </td>
          } @else {
            <td>
              {{ rowData[col.field] }}
            </td>
          }
        }
      </tr>
    </ng-template>
  </p-table>
  <p-popover #op>
    <ng-template #content>
      <tl-driver-card></tl-driver-card>
    </ng-template>
  </p-popover>
}
