<tl-analysis-base class="base">
  <div chart class="chart-container">
    @if (year() && race() && session()) {
      <div echarts
           class="chart"
           [loading]="processedData() === undefined"
           [options]="chartOptions()"
           [theme]="chartTheme()"
           [autoResize]="true"
      ></div>
    } @else {
    <div class="flex-1 flex flex-col justify-center items-center h-full w-full">
      <h1>Please select a session.</h1>
      <h1>Loading a session can take up to 30 seconds.</h1>
    </div>
  }

  </div>
  <div options class="flex flex-col gap-8">
    <h1>Options</h1>
    <p-floatlabel variant="on">
      <p-select
        class="w-full"
        [inputId]="'year'"
        [options]="years"
        [ngModel]="year()"
        (ngModelChange)="year.set($event)"
        [filter]="true">
      </p-select>
      <label [for]="'year'">Year</label>
    </p-floatlabel>

    <p-floatlabel variant="on">
      <p-select
        class="w-full"
        [inputId]="'race'"
        [options]="races()"
        [filter]="true"
        [ngModel]="race()"
        (ngModelChange)="race.set($event)">
      </p-select>
      <label [for]="'race'">Race</label>
    </p-floatlabel>

    <p-floatlabel variant="on">
      <p-select
        class="w-full"
        [inputId]="'session'"
        [options]="sessions()"
        [filter]="true"
        [ngModel]="session()"
        (ngModelChange)="session.set($event)">
      </p-select>
      <label [for]="'session'">Session</label>
    </p-floatlabel>
  </div>

</tl-analysis-base>
