<tl-analysis-base class="base">
  <div chart class="chart-container">
    @if (selectedEvent && selectedYear && selectedSession && (driverOne() || driverTwo())) {
      <div echarts
           class="chart"
           [loading]="processedData() === undefined || circuitInfo() ===undefined"
           [options]="chartOptions()"
           [theme]="chartTheme()"
           [autoResize]="true"
      ></div>
    } @else {
      <div class="flex-1 flex flex-col justify-center items-center h-full w-full">
        <h1>Please select a session.</h1>
        <h1>Loading a session can take up to 30 seconds.</h1>
      </div>
    }

  </div>
  <div options class="flex flex-col gap-8">
    <h1>Options</h1>
    <tl-source-selection
      [withSessionSelection]="true"
      (raceSelection)="loadCarTelemetry($event)"
    >
      <div additionalOptions>
        @if (selectedEvent && selectedYear && selectedSession) {
          <p-floatlabel variant="on">
            <p-select
              class="w-full"
              [inputId]="'driverOne'"
              [options]="drivers()"
              [filter]="true"
              [loading]="drivers().length === 0"
              [ngModel]="driverOne()"
              (ngModelChange)="driverOne.set($event)">
            </p-select>
            <label [for]="'driverOne'">Select Driver 1</label>
          </p-floatlabel>

          <p-floatlabel variant="on">
            <p-select
              class="w-full"
              [inputId]="'driverTwo'"
              [options]="drivers()"
              [filter]="true"
              [loading]="drivers().length === 0"
              [ngModel]="driverTwo()"
              (ngModelChange)="driverTwo.set($event)">
            </p-select>
            <label [for]="'driverTwo'">Select Driver 2</label>
          </p-floatlabel>
        }
      </div>
    </tl-source-selection>
  </div>

</tl-analysis-base>
